--- ipheth-driver/ipheth.c.org	2009-11-30 13:41:10.227620249 -0500
+++ ipheth-driver/ipheth.c	2009-11-30 13:52:34.246606240 -0500
@@ -99,6 +99,7 @@
 	struct delayed_work carrier_work;
 };
 
+
 static int ipheth_rx_submit(struct ipheth_device *dev, gfp_t mem_flags);
 
 static int ipheth_alloc_urbs(struct ipheth_device *iphone)
@@ -397,6 +398,16 @@
 	.get_link = ipheth_ethtool_op_get_link
 };
 
+static const struct net_device_ops ipheth_net_dev_ops =
+{
+    .ndo_open = &ipheth_open,
+    .ndo_stop = &ipheth_close,
+    .ndo_start_xmit = &ipheth_tx,
+    .ndo_tx_timeout = &ipheth_tx_timeout,
+    .ndo_get_stats = &ipheth_stats,
+};
+
+
 static int ipheth_probe (struct usb_interface *intf,
 			 const struct usb_device_id *id)
 {
@@ -417,11 +428,8 @@
 	if (!netdev)
 		return -ENOMEM;
 
-        netdev->open = &ipheth_open;
-        netdev->stop = &ipheth_close;
-        netdev->hard_start_xmit = &ipheth_tx;
-        netdev->tx_timeout = &ipheth_tx_timeout;
-        netdev->get_stats = &ipheth_stats;
+        netdev->netdev_ops = &ipheth_net_dev_ops;
+
 	netdev->watchdog_timeo = IPHETH_TX_TIMEOUT;
 
 	dev = netdev_priv(netdev);
